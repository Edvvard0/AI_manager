{% extends "base.html" %}

{% block title %}Задача: {{ task.title }}{% endblock %}

{% block extra_head %}
<style>
  .task-wrapper {
    padding: 20px;
    width: 100%;
    box-sizing: border-box;
    overflow-y: auto;
  }

  .task-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }

  .task-title {
    font-size: 22px;
    font-weight: bold;
    margin-bottom: 15px;
  }

  .task-field {
    margin-bottom: 12px;
  }

  .task-label {
    font-weight: bold;
    display: inline-block;
    min-width: 140px;
    color: #333;
  }

  .task-value {
    color: #555;
  }

  .executor-box {
    border: 1px solid #eee;
    background: #fafafa;
    border-radius: 6px;
    padding: 10px;
    margin-top: 5px;
  }

  .button-row {
    margin-top: 25px;
    display: flex;
    gap: 10px;
  }

  .back-button, .edit-button {
    display: inline-block;
    padding: 10px 15px;
    border: 1px solid #000;
    border-radius: 5px;
    background: #fff;
    cursor: pointer;
    text-decoration: none;
    color: #000;
    transition: background-color 0.2s ease;
  }

  .back-button:hover, .edit-button:hover {
    background: #f5f5f5;
  }
</style>
{% endblock %}

{% block content %}
<div class="task-wrapper">
  <div class="task-card">
      <br>
    <div class="task-title">{{ task.title }}</div>

    <div class="task-field">
      <span class="task-label">Описание:</span>
      <span class="task-value">{{ task.description or "—" }}</span>
    </div>

    <div class="task-field">
      <span class="task-label">Комментарий:</span>
      <span class="task-value">{{ task.comment or "—" }}</span>
    </div>

    <div class="task-field">
      <span class="task-label">Статус:</span>
      <span class="task-value">{{ task.status }}</span>
    </div>

    <div class="task-field">
      <span class="task-label">Дедлайн:</span>
      <span class="task-value">{{ task.deadline_date }}</span>
    </div>

    <div class="task-field">
      <span class="task-label">Файл:</span>
      {% if task.file_path %}
        <a href="{{ task.file_path }}" target="_blank">Скачать</a>
      {% else %}
        <span class="task-value">Нет</span>
      {% endif %}
    </div>

    <div class="task-field">
      <span class="task-label">Исполнитель:</span>
      {% if task.executor %}
        <div class="executor-box">
          <div><strong>Имя:</strong> {{ task.executor.name }}</div>
          <div><strong>Username:</strong> {{ task.executor.username }}</div>
          <div><strong>Отдел:</strong> {{ task.executor.department }}</div>
        </div>
      {% else %}
        <span class="task-value">Не назначен</span>
      {% endif %}
    </div>

    <div class="task-field">
      <span class="task-label">Чат:</span>
      {% if task.chats %}
        <span class="task-value">{{ task.chats.title }}</span>
      {% else %}
        <span class="task-value">Не привязан</span>
      {% endif %}
    </div>
  </div>

  <div class="button-row">
    <a href="/pages/all_tasks" class="back-button">← Назад к списку</a>
    <a href="/pages/task_update/{{ task.id }}" class="edit-button">✎ Изменить</a>
  </div>
</div>
{% endblock %}
